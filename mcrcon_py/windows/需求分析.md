# 一、需求分析

在开发“基于 MCRcon 的 Minecraft 游戏服务器简易管理系统”之前，我们首先需要明确项目的具体需求。需求分析是项目成功的关键，它确保我们开发出的产品能够真正解决用户的痛点。本章节将从“功能性需求”和“非功能性需求”两个维度进行阐述。

### 1. 功能性需求 (Functional Requirements)

功能性需求定义了系统必须具备的具体功能和行为，即“系统应该做什么”。

| 需求类别       | 需求点                 | 详细描述                                                                                                                                                 |
| :------------- | :--------------------- | :------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **核心连接**   | **1.1 服务器连接**     | 系统必须能够根据用户提供的服务器地址（IP）、RCON 端口号和 RCON 密码，通过 TCP/IP 协议成功建立到 Minecraft 服务器的连接。                                 |
|                | **1.2 认证机制**       | 连接建立后，系统必须能够使用用户提供的 RCON 密码，遵循 MCRcon 协议完成身份认证，以获取执行命令的权限。                                                   |
|                | **1.3 连接状态管理**   | 系统需要能明确地向用户展示当前的连接状态（如：已连接、未连接、连接失败），并能处理连接中断或认证失败等异常情况，给出清晰的提示。                         |
| **命令交互**   | **2.1 命令发送**       | 用户应能在一个简易的命令行界面中输入任何标准的 Minecraft 服务器指令（例如 `say Hello World`, `time set day`, `give player_name diamond 1` 等）。         |
|                | **2.2 结果接收与回显** | 系统在发送指令后，必须能够接收服务器返回的执行结果或错误信息，并将其完整、清晰地显示在用户界面上。                                                       |
| **自动化管理** | **3.1 自动化任务执行** | 系统应具备执行简单自动化任务的能力。例如，可以编写一个脚本，利用核心连接模块，实现定时向服务器发送公告（如“服务器将在 10 分钟后重启，请注意保存进度”）。 |

### 2. 非功能性需求 (Non-functional Requirements)

非功能性需求描述了系统应具备的品质和特性，即“系统应该怎么样”。

| 需求类别     | 需求点             | 详细描述                                                                                                                                         |
| :----------- | :----------------- | :----------------------------------------------------------------------------------------------------------------------------------------------- |
| **易用性**   | **2.1 界面友好**   | 系统应提供一个简洁明了的命令行交互界面，操作逻辑直观，避免复杂的配置流程，让不熟悉编程的用户也能快速上手。                                       |
|              | **2.2 配置便捷**   | 服务器的地址、端口、密码等配置信息应从外部文件（如 `id.txt`）读取，而不是硬编码在代码中，方便用户随时修改。                                      |
| **可靠性**   | **3.1 异常处理**   | 系统必须能够优雅地处理常见的运行时错误，如网络中断、服务器无响应、RCON 密码错误、指令不存在等，并向用户提供有意义的错误提示，而不是直接崩溃。    |
|              | **3.2 稳定性**     | 系统应能长时间稳定运行，尤其是在执行自动化任务时，不会因为长时间挂起而导致资源泄露或程序卡死。                                                   |
| **可维护性** | **4.1 代码可读性** | 源代码的结构应清晰，遵循良好的编程规范（如 PEP 8），并配有必要的注释，以解释关键代码块的逻辑，方便其他同学阅读、学习和进行二次开发。             |
|              | **4.2 模块化设计** | 系统应采用模块化的设计思想，将核心的 MCRcon 协议处理、用户交互界面、自动化脚本等功能解耦，封装在不同的模块或文件中，提高代码的复用性和可维护性。 |

### 3. 用例分析 (Use Case Analysis)

用例是从用户视角描述系统功能需求的有效方法。它清晰地定义了“谁”可以使用系统来“做什么”。

**参与者 (Actor):**

-   **服务器管理员 (Admin):** 本系统的唯一使用者，希望通过本工具远程管理自己的 Minecraft 服务器。

**核心用例:**

| 用例名称     | UC-01: 执行单条管理指令                                                                                                                                                                                                                                                               |
| :----------- | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **参与者**   | 服务器管理员                                                                                                                                                                                                                                                                          |
| **前置条件** | 1. 管理员已正确配置服务器 IP、端口和 RCON 密码。<br>2. Minecraft 服务器已正常运行并开启 RCON 功能。<br>3. 本管理程序已启动。                                                                                                                                                          |
| **基本流程** | 1. 程序提示管理员输入指令。<br>2. 管理员输入一条有效的 Minecraft 指令（如 `say 服务器运行正常`）。<br>3. 程序建立到服务器的连接并通过认证。<br>4. 程序将指令发送到服务器。<br>5. 程序接收服务器返回的执行结果。<br>6. 程序在界面上显示该结果。<br>7. 程序返回步骤 1，等待下一条指令。 |
| **后置条件** | 服务器状态已根据指令被改变，且管理员看到了执行结果。                                                                                                                                                                                                                                  |
| **异常流程** | 1a. 如果连接或认证失败，程序显示错误信息（如“密码错误”或“无法连接到服务器”），并终止流程。<br>4a. 如果发送指令失败（如网络中断），程序显示错误信息。<br>5a. 如果服务器返回的是错误信息（如指令不存在），程序也将其显示给管理员。                                                      |

| 用例名称     | UC-02: 执行自动化定时公告                                                                                                                                                                                                                                                                        |
| :----------- | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **参与者**   | 服务器管理员                                                                                                                                                                                                                                                                                     |
| **前置条件** | 1. 管理员已正确配置服务器 IP、端口和 RCON 密码。<br>2. Minecraft 服务器已正常运行并开启 RCON 功能。<br>3. 管理员已在自动化脚本中设定好要发送的公告内容和时间间隔。                                                                                                                               |
| **基本流程** | 1. 管理员运行自动化脚本 (`automation_win.py`)。<br>2. 脚本启动一个定时器。<br>3. 每次到达预设时间间隔，定时器触发。<br>4. 脚本自动连接到服务器并认证。<br>5. 脚本自动发送预设的公告指令（如 `say 欢迎来到我们的服务器！`）。<br>6. 脚本打印发送成功的日志。<br>7. 脚本继续等待下一次定时器触发。 |
| **后置条件** | 服务器内的所有玩家会周期性地看到预设的公告信息。                                                                                                                                                                                                                                                 |
| **异常流程** | 4a. 如果某次自动连接或发送指令失败，脚本应记录错误日志，并尝试在下一个周期继续执行，而不是直接退出。                                                                                                                                                                                             |
